(function(){function a(d,w,v,Q,F){F=F||{};var f=(Math.PI/180),z="#ffffff",U=F.data||[],P=F.colors||[],A=F.hoverTitles||[],C=F.sliceHandles||[],s=F.legendLabels||[],h=F.hrefs||[],B=F.legendXstart||w+Q+30,Z=F.legendYstart||v-Q,b=B+38,E=Z,e=F.donut||false,g=F.cursor||"normal",W=F.marker||"circle",c=F.fontFamily||"Arial",t=F.fontSize||"14",u=F.donutFill||z,q=Math.abs(F.donutDiameter)||0.5,N=F.growingOnLoad||false,k=F.sliceHoverEffect||"",I=0,o=500,n=d.set(),V=d.set(),x=d.set(),Y={},L;for(L=0;L<U.length;L++){I+=U[L]}d.customAttributes.slice=function(af,ae,aa,ag,ad){var ac=af+aa*Math.cos(ag*f),ab=af+aa*Math.cos(ad*f),aj=ae+aa*Math.sin(ag*f),ai=ae+aa*Math.sin(ad*f),ah=(Math.abs(ad-ag)>180);return{path:[["M",af,ae],["L",ac,aj],["A",aa,aa,0,+ah,1,ab,ai],["z"]]}};d.customAttributes.outline=function(ah,af,ab,aj,ad){var am=ab+1,ag=ab+10,ae=ah+am*Math.cos(aj*f),al=af+am*Math.sin(aj*f),ac=ah+ag*Math.cos(aj*f),aa=af+ag*Math.sin(aj*f),ai=ah+am*Math.cos((aj+(ad-aj))*f),ap=af+am*Math.sin((aj+(ad-aj))*f),ao=ah+ag*Math.cos((aj+(ad-aj))*f),an=af+ag*Math.sin((aj+(ad-aj))*f),ak=(Math.abs(ad-aj)>180);return{path:[["M",ae,al],["L",ac,aa],["A",ag,ag,0,+ak,1,ao,an],["L",ai,ap],["A",am,am,0,+(ak),0,ae,al],["z"]]}};for(L=0;L<U.length;L++){var O=U[L]||0,H=P[L]||"#FF0000",R=s[L]||"",J=A[L]||"",y=h[L]||"",m=C[L]||"",K=360*O/I,T=(L===0?0:T),i=T,T=i+K,X=(N===true?[w,v,Q,0,0]:[w,v,Q,i,T]),p=d.path().attr({slice:X,stroke:z,"stroke-width":1.5,"stroke-linejoin":"round",fill:H,title:J,cursor:g});if(y!==""){var j=p.attr();j.href=y;p.attr(j)}p.handle=m;p.cx=w;p.cy=v;D(R,H);G(N,p,i,T);M(k,p);l(k,p,i,T);n.push(p)}if(N){var S=setTimeout(function(){var aa;var r;for(aa in Y){r=Y[aa];r.slice.animate(r.animation,o)}clearTimeout(S)},200)}function G(ab,ad,aa,r){if(ab){X=[w,v,Q,aa,r];var ac=Raphael.animation({slice:X},o);Y[ad.handle]={slice:ad,animation:ac}}}function M(ab,aa){if(ab!==""&&ab==="outline"){var r=d.path().attr({outline:X,stroke:z,"stroke-width":1.5,"stroke-linejoin":"round",fill:H});aa.outline=r;r.hide()}}function l(ae,ad,aa,r){if(ae===""){return}var ac=w+6*Math.cos((aa+(r-aa)/2)*f),ab=v+6*Math.sin((aa+(r-aa)/2)*f);if(ae==="shift"){ad.mouseover(function(){ad.stop();ad.animate({slice:[ac,ab,Q,aa,r]})});ad.mouseout(function(){ad.animate({slice:[w,v,Q,aa,r]})})}else{if(ae==="shift-bounce"){ad.mouseover(function(){ad.stop();ad.animate({slice:[ac,ab,Q,aa,r]})});ad.mouseout(function(){ad.animate({slice:[w,v,Q,aa,r]},o,"bounce")})}else{if(ae==="scale"){ad.mouseover(function(){ad.stop();ad.animate({transform:"s1.1 1.1 "+ad.cx+" "+ad.cy})});ad.mouseout(function(){ad.animate({transform:"s1 1 "+ad.cx+" "+ad.cy})})}else{if(ae==="scale-bounce"){ad.mouseover(function(){ad.stop();ad.animate({transform:"s1.1 1.1 "+ad.cx+" "+ad.cy})});ad.mouseout(function(){ad.animate({transform:"s1 1 "+ad.cx+" "+ad.cy},o,"bounce")})}else{if(ae==="outline"){ad.mouseover(function(){ad.outline.show()});ad.mouseout(function(){ad.outline.hide()})}}}}}}function D(ac,ab){if(ac!==""){E+=10;var r=9;var ad=null;var aa={title:ac,fill:ab,"fill-rule":"nonzero",stroke:z,"stroke-width":"0.1",cursor:g};if(W==="rect"){ad=d.path("M "+B+", "+Z+" l 28,0  0,16  -28,0  0,-16z")}else{if(W==="circle"){ad=d.circle(B+(2*r),Z+r,r)}else{if(W==="ellipse"){r=10;ad=d.ellipse(B+(2*r),Z+r,1.25*r,r*0.75)}}}if(ad!=null){ad.attr(aa);ad.handle=m;V.push(ad)}var ae=d.text(b,E,ac);ae.attr({"font-family":c,"font-weight":"normal",fill:"#474747",cursor:g,"font-size":t,"text-anchor":"start"});ae.handle=m;x.push(ae);Z+=30;E=Z}}if(e===true){if(q>0.9){q=0.9}d.circle(w,v,Math.ceil(Q*q)).attr({stroke:"none",fill:u})}return{slices:n.items,markers:V.items,descriptions:x.items}}Raphael.fn.donutpiechart=function(b,e,d,c){return new a(this,b,e,d,c)}})();
